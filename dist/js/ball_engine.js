function onMouseUp(a){var l=new Ball(a.clientX-50,a.clientY,Math.floor(10*Math.random()+2),Math.floor(10*Math.random()+5));balls.push(l),drawBall(l)}function init(){generateBalls(),ballTimer=setInterval(animateBalls,50);var a=document.querySelector("#gravity-value"),l=document.querySelector("#friction-value");a.innerHTML=gravity,l.innerHTML=friction}function generateBalls(){balls=[];for(var a=0;a<numberOfBalls;a++){var l=Math.floor(200*Math.random()+20),t=-100*(a+1),e=Math.floor(15*Math.random()),n=Math.floor(1.5*Math.random()+2*a);ball=new Ball(l,t,e,n),balls.push(ball)}}function getRandomInt(a,l){return a=Math.ceil(a),l=Math.floor(l),Math.floor(Math.random()*(l-a))+a}function Ball(a,l,t,e){this.centerX=a,this.centerY=l,this.vectorX=t,this.vectorY=e,this.radius=getRandomInt(15,20),this.mass=this.radius/getRandomInt(1,6),this.spin=0,this.spinDirection="CW",this.imageIndex=getRandomInt(0,15)}function drawBall(a){context.beginPath(),context.arc(Math.round(a.centerX),Math.round(a.centerY),a.radius,0,2*Math.PI,!1),context.closePath(),context.save(),context.translate(a.centerX,a.centerY),context.rotate(a.spin*Math.PI/180),context.drawImage(ballImages[a.imageIndex],0-a.radius,0-a.radius,2*a.radius,2*a.radius),context.rotate(a.spin*Math.PI/180*-1),context.restore()}function animateBalls(){context.clearRect(0,0,canvas.width,canvas.height);for(var a=0;a<balls.length;a++)balls[a].centerX+balls[a].radius>canvas.width?(balls[a].centerX=canvas.width-(balls[a].radius+1),balls[a].vectorX*=-1*friction,balls[a].spinDirection="CCW"):balls[a].centerX-balls[a].radius<0&&(balls[a].centerX=balls[a].radius+1,balls[a].vectorX*=-1*friction,balls[a].spinDirection="CW"),0!=balls[a].vectorY&&(balls[a].centerY+balls[a].radius>BOUNCE_FLOOR?(balls[a].centerY=BOUNCE_FLOOR-(balls[a].radius+1),balls[a].vectorY*=-1,balls[a].vectorY+=gravity):balls[a].centerY-balls[a].radius<0&&(balls[a].centerY=balls[a].radius+1,balls[a].vectorY*=-1),balls[a].vectorY+=balls[a].mass*gravity*.5,balls[a].centerY>=canvas.height-(balls[a].radius+1)&&balls[a].vectorY<2&&balls[a].vectorY>-2&&(balls[a].vectorY=0,balls[a].centerY=Math.round(canvas.height-balls[a].radius))),balls[a].vectorX*=friction,balls[a].vectorY*=friction,balls[a].centerX+=balls[a].vectorX,balls[a].centerY+=balls[a].vectorY,balls[a].spin>360?balls[a].spin=balls[a].spin%360:balls[a].spin<-360&&(balls[a].spin=balls[a].spin%360*-1),"CW"==balls[a].spinDirection?balls[a].spin=balls[a].spin+spinAmount:balls[a].spin=balls[a].spin-spinAmount,balls[a].vectorX<1&&balls[a].vectorX>-1&&(balls[a].spin=0,balls[a].vectorX=0),drawBall(balls[a])}for(var numberOfBalls=12,numberOfImages=15,balls=[],ballImages=[],gravity=.5,friction=.99,spinAmount=12,tl,canvas=document.getElementById("myCanvas"),context=canvas.getContext("2d"),ballTimer,theTime=0,BALL_DURATION=5e3,BOUNCE_FLOOR=500,i=1;i<=numberOfImages;i++)newImage="img"+i,newSource="images/ball"+i+".png",newImage=new Image,newImage.src=newSource,ballImages.push(newImage);canvas.addEventListener("mouseup",onMouseUp),window.onload=init;